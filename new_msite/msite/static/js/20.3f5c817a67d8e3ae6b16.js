webpackJsonp([20],{Qx61:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("mvHQ"),n=o.n(a),c=o("Dd8w"),r=o.n(c),s=o("NYxO"),i=/^(13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9]|19[0-9]|16[0-9])\d{8}$/;var l={data:function(){return{phone:"",errorTips:!1,privacyAgreement:"",registerAgreement:"",actionFlagbool:!1,siginQueryId:"",showKeyboard:!1,codeNum:"",codeText:"获取验证码",codeNumShow:!1,clickAble:!0}},created:function(){var e=!localStorage.getItem("actionFlagId");this.siginQueryId=this.$route.query.shareId?this.$route.query.shareId:"",!e&&!this.actionFlagState||this.siginQueryId?this.actionFlagbool=!1:this.actionFlagbool=!0,this.privacyAgreement=this.$server.privacyAgreement,this.registerAgreement=this.$server.registerAgreement,this.$route.query.from?this.setActionflagstates(!0):this.setActionflagstates(!1)},computed:r()({changeColor:function(){return!(6!==this.codeNum.length||!i.test(this.phone))}},Object(s.c)(["actionFlagState","hasOpenApp","passwordActionState"])),mounted:function(){},methods:r()({},Object(s.b)(["setInterestFlag","setActionStateFlag","setActionflagstates","setGiftFlag","setMembershipCardDialog","setpasswardStates"]),{onInput:function(e){if(!(this.codeNum.length<6))return!1;5==this.codeNum.length&&(this.showKeyboard=!1),this.codeNum+=e},onDelete:function(){this.codeNum=this.codeNum.substring(0,this.codeNum.length-1)},smsLogin:function(){var e=this,t=this;if(this.changeColor&&this.clickAble){this.clickAble=!1;var o="";o=this.siginQueryId?{cellphone:this.phone,code:this.codeNum,origin:1,shareUserId:this.siginQueryId,type:1}:{cellphone:this.phone,code:this.codeNum,origin:1},this.$http.post(this.$server.loginBySMS,o).then(function(o){if(200==o.data.status){var a={accessToken:o.data.content.accessToken,nickname:o.data.content.nickname,avatar:o.data.content.avatar,userid:o.data.content.id,cellphone:o.data.content.cellphone};e.$setCookie("uInfo",n()(a)),localStorage.removeItem("setInterestFlagBool");var c=sessionStorage.getItem("rediectUrl");if(t.actionFlagState&&!e.siginQueryId){var r=Number(localStorage.getItem("actionFlagId"));r?(e.setActionflagstates(!1),e.$http.post(e.$server.getGiftBagReceive,{giftId:r,userId:o.data.content.id}).then(function(t){200==t.data.status?(localStorage.setItem("actionFlagIsOk","ok"),localStorage.setItem("actionFlagIsOkTime",t.data.content.tryEndAt),localStorage.setItem("userSmsLoginInfo",n()(t)),e.setActionStateFlag(!0)):(e.$toast({mask:!1,message:"领取失败"==t.data.message?"您已经领取过大礼包":t.data.message}),setTimeout(function(){o.data.content.integralNum>0?(localStorage.setItem("setInterestFlagBool","ok"),o.data.content.welcomeSpeech.length>0?(sessionStorage.setItem("welcomeSpeech",o.data.content.welcomeSpeech),o.data.content.welcomeSpeechForMemberMake&&o.data.content.welcomeSpeechForMemberMake.length>0&&sessionStorage.setItem("welcomeSpeechForMemberMake",o.data.content.welcomeSpeechForMemberMake)):o.data.content.welcomeSpeechForMemberMake&&o.data.content.welcomeSpeechForMemberMake.length>0&&sessionStorage.setItem("welcomeSpeechForMemberMake",o.data.content.welcomeSpeechForMemberMake)):o.data.content.welcomeSpeech.length>0?(e.setGiftFlag(o.data.content.welcomeSpeech),o.data.content.welcomeSpeechForMemberMake&&o.data.content.welcomeSpeechForMemberMake.length>0&&sessionStorage.setItem("welcomeSpeechForMemberMake",o.data.content.welcomeSpeechForMemberMake)):o.data.content.welcomeSpeechForMemberMake&&o.data.content.welcomeSpeechForMemberMake.length>0&&e.setMembershipCardDialog(o.data.content.welcomeSpeechForMemberMake)},2e3))}),o.data.content.integralNum>0?(localStorage.setItem("setInterestFlagBool","ok"),o.data.content.welcomeSpeech.length>0?(sessionStorage.setItem("welcomeSpeech",o.data.content.welcomeSpeech),o.data.content.welcomeSpeechForMemberMake&&o.data.content.welcomeSpeechForMemberMake.length>0&&sessionStorage.setItem("welcomeSpeechForMemberMake",o.data.content.welcomeSpeechForMemberMake)):o.data.content.welcomeSpeechForMemberMake&&o.data.content.welcomeSpeechForMemberMake.length>0&&sessionStorage.setItem("welcomeSpeechForMemberMake",o.data.content.welcomeSpeechForMemberMake)):o.data.content.welcomeSpeech.length>0?(sessionStorage.setItem("welcomeSpeech",o.data.content.welcomeSpeech),o.data.content.welcomeSpeechForMemberMake&&o.data.content.welcomeSpeechForMemberMake.length>0&&sessionStorage.setItem("welcomeSpeechForMemberMake",o.data.content.welcomeSpeechForMemberMake)):o.data.content.welcomeSpeechForMemberMake&&o.data.content.welcomeSpeechForMemberMake.length>0&&e.setMembershipCardDialog(o.data.content.welcomeSpeechForMemberMake)):o.data.content.integralNum>0?(e.setInterestFlag(!0),o.data.content.welcomeSpeech.length>0?(sessionStorage.setItem("welcomeSpeech",o.data.content.welcomeSpeech),o.data.content.welcomeSpeechForMemberMake&&o.data.content.welcomeSpeechForMemberMake.length>0&&sessionStorage.setItem("welcomeSpeechForMemberMake",o.data.content.welcomeSpeechForMemberMake)):o.data.content.welcomeSpeechForMemberMake&&o.data.content.welcomeSpeechForMemberMake.length>0&&sessionStorage.setItem("welcomeSpeechForMemberMake",o.data.content.welcomeSpeechForMemberMake)):o.data.content.welcomeSpeech.length>0?(e.setGiftFlag(o.data.content.welcomeSpeech),o.data.content.welcomeSpeechForMemberMake&&o.data.content.welcomeSpeechForMemberMake.length>0&&sessionStorage.setItem("welcomeSpeechForMemberMake",o.data.content.welcomeSpeechForMemberMake)):o.data.content.welcomeSpeechForMemberMake&&o.data.content.welcomeSpeechForMemberMake.length>0&&e.setMembershipCardDialog(o.data.content.welcomeSpeechForMemberMake)}else o.data.content.integralNum>0?(c&&(c.includes("assembleRecordId")||c.includes("receiveLearnCard"))?e.setInterestFlag(!1):e.setInterestFlag(!0),o.data.content.welcomeSpeech.length>0?(sessionStorage.setItem("welcomeSpeech",o.data.content.welcomeSpeech),o.data.content.welcomeSpeechForMemberMake&&o.data.content.welcomeSpeechForMemberMake.length>0&&sessionStorage.setItem("welcomeSpeechForMemberMake",o.data.content.welcomeSpeechForMemberMake)):o.data.content.welcomeSpeechForMemberMake&&o.data.content.welcomeSpeechForMemberMake.length>0&&sessionStorage.setItem("welcomeSpeechForMemberMake",o.data.content.welcomeSpeechForMemberMake)):o.data.content.welcomeSpeech.length>0?(e.setGiftFlag(o.data.content.welcomeSpeech),o.data.content.welcomeSpeechForMemberMake&&o.data.content.welcomeSpeechForMemberMake.length>0&&sessionStorage.setItem("welcomeSpeechForMemberMake",o.data.content.welcomeSpeechForMemberMake)):o.data.content.welcomeSpeechForMemberMake&&o.data.content.welcomeSpeechForMemberMake.length>0&&e.setMembershipCardDialog(o.data.content.welcomeSpeechForMemberMake);if(1==o.data.content.isVip&&(a.isVip=!0),c)sessionStorage.removeItem("rediectUrl"),e.$router.push(c);else{var s=sessionStorage.getItem("learnCardId");if(s){var i={cardId:s};e.$http.post(e.$server.getLearningCardInfo,i).then(function(t){if(200==t.data.status){var o=t.data.content.state,a=t.data.content.type;1==o?(sessionStorage.removeItem("learnCardId"),sessionStorage.setItem("receiveLearnCard","fail"),1==a?e.$router.push("/user/learningCard"):e.$router.push("/bought")):2==o?e.$http.post(e.$server.receivLearningCard,i).then(function(t){200==t.data.status?(sessionStorage.removeItem("learnCardId"),sessionStorage.setItem("receiveLearnCard","success"),1==a?e.$router.push("/user/learningCard"):e.$router.push("/bought")):e.$toast({mask:!1,message:t.data.message})}):3==o&&(sessionStorage.removeItem("learnCardId"),1==a?e.$router.push("/user/learningCard"):e.$router.push("/bought"))}})}else e.$router.push("/")}}else e.clickAble=!0})}},sendSMS:function(){var e=this;if("获取验证码"!=this.codeText)return!1;this.phone.length<11||this.$http.post(this.$server.getCodeForLoginBySMS,{cellphone:this.phone,smsType:1}).then(function(t){if(200==t.data.status){e.$toast("短信发送成功，请注意查收");var o=60;e.codeNumShow=!0,e.codeText=o+"s";var a=void 0;a&&clearInterval(a),a=setInterval(function(){o<=1?(e.codeText="获取验证码",clearInterval(a)):(o--,e.codeText=o+"s")},1e3)}})},goLogin:function(){this.$router.push("/login")},goRegister:function(){this.$router.push("/register")},closeDialog:function(e){e.stopPropagation()}})},m={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"go-logn"},[o("div",{staticClass:"div1",on:{click:function(t){return e.$router.go(-1)}}},[o("van-icon",{staticClass:"return-left",attrs:{name:"arrow-left"}})],1),e._v(" "),o("div",{staticClass:"div2"},[e._v("\n\t\t\t\t学国学网登录\n\t\t\t")])]),e._v(" "),o("div",{staticClass:"phone-wrap phone-wrap-top1"},[o("div",{staticClass:"phone-num"},[o("span",[e._v("+86")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],attrs:{type:"tel",maxlength:"11",placeholder:"输入手机号码"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}}),e._v(" "),o("div",{staticClass:"getCodeNum1",class:[{"bgd-none":"获取验证码"!=e.codeText},{"gray-login-button":e.phone.length<11}],on:{click:e.sendSMS}},[e._v(e._s(e.codeText))])]),e._v(" "),o("div",{staticClass:"numberkeyboard"},[o("van-field",{attrs:{readonly:"",clickable:"",placeholder:"输入验证码",value:e.codeNum},nativeOn:{touchstart:function(t){t.stopPropagation(),e.showKeyboard=!0}}})],1),e._v(" "),o("van-number-keyboard",{attrs:{show:e.showKeyboard,maxlength:6},on:{input:e.onInput,delete:e.onDelete,blur:function(t){e.showKeyboard=!1}}}),e._v(" "),o("div",{staticClass:"phone-login",class:e.changeColor?"red-login-button":"gray-login-button",on:{click:e.smsLogin}},[e._v("确定")]),e._v(" "),o("div",{staticClass:"bottom clearfix"},[o("p",{directives:[{name:"show",rawName:"v-show",value:!e.siginQueryId&&e.passwordActionState,expression:"!siginQueryId&&passwordActionState"}],staticClass:"pwd-login",on:{click:e.goLogin}},[e._v("密码登录")])]),e._v(" "),o("div",{staticClass:"must-know"},[o("p",[e._v("登录即表示您同意并愿意遵守学国学网")]),e._v(" "),o("p",[o("a",{attrs:{href:e.registerAgreement}},[e._v("《使用协议》")]),e._v("和"),o("a",{attrs:{href:e.privacyAgreement}},[e._v("《隐私协议》")])])])],1),e._v(" "),o("div",{staticClass:"auth-dialog-wrap",class:e.errorTips?"show":"hidden",on:{click:function(t){return e.closeDialog(t)}}},[o("div",{staticClass:"dialog-box"},[o("van-icon",{attrs:{name:"clear"}}),e._v(" "),o("p",{staticClass:"error-tip"},[e._v("手机格式错误，请重新输入！")])],1)])])},staticRenderFns:[]};var h=o("VU/8")(l,m,!1,function(e){o("f3Kt"),o("kR5T")},"data-v-1c9b80c7",null);t.default=h.exports},f3Kt:function(e,t){},kR5T:function(e,t){}});