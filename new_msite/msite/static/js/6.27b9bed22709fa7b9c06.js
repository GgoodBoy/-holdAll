webpackJsonp([6],{"1MJ7":function(e,t){},"Bvx+":function(e,t,s){"use strict";var o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"go-logn"},[s("div",{staticClass:"div1",on:{click:function(t){return e.$router.go(-1)}}},[s("van-icon",{staticClass:"return-left",attrs:{name:"arrow-left"}})],1),e._v(" "),s("div",{staticClass:"div2"},[e._v("\n\t\t\t\t"+e._s(e.classifyName)+"\n\t\t\t")])]),e._v(" "),s("div",{staticClass:"phone-wrap"},[s("div",{staticClass:"phone-num"},[s("span",[e._v("+86")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],attrs:{type:"tel",maxlength:"11",placeholder:"输入手机号码"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"login-button",class:e.changeColor?"red-login-button":"gray-login-button",on:{click:e.getCode}},[e._v("\n            获取验证码\n        ")]),e._v(" "),s("div",{staticClass:"must-know"},[s("p",[e._v("登录即表示您同意并愿意遵守学国学网")]),e._v(" "),s("p",[s("a",{attrs:{href:e.registerAgreement}},[e._v("《使用协议》")]),e._v("和"),s("a",{attrs:{href:e.privacyAgreement}},[e._v("《隐私协议》")])])])])},staticRenderFns:[]};var n=s("VU/8")({props:["classifyName","routerTitle","t"],data:function(){return{phone:"",clickAble:!0,regExp:"/^d$/",registerAgreement:"",privacyAgreement:""}},created:function(){this.privacyAgreement=this.$server.privacyAgreement,this.registerAgreement=this.$server.registerAgreement},methods:{getCode:function(){if(this.changeColor&&this.clickAble){this.clickAble=!1;var e=this.phone;if(!/^(13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9]|19[0-9]|16[0-9])\d{8}$/.test(e))return this.$toast("手机号输入错误"),this.clickAble=!0,!1;"register"==this.routerTitle||"bound"==this.routerTitle?this.sendSMS(1):"forget"==this.routerTitle&&this.sendSMS(2)}},sendSMS:function(e){var t=this;this.$http.post(this.$server.sendSms,{cellphone:this.phone,smsType:e}).then(function(e){200==e.data.status?(t.$toast("发送成功,请注意查收"),t.$emit("update:phone",t.phone),t.$emit("update:t",2)):t.clickAble=!0})},onClickLeft:function(){this.$router.go(-1)}},computed:{changeColor:function(){return 11==this.phone.length}}},o,!1,function(e){s("lcGt")},"data-v-6953e67b",null);t.a=n.exports},Ds8B:function(e,t,s){"use strict";var o=s("mvHQ"),n=s.n(o),a=s("Dd8w"),r=s.n(a),i=s("NYxO"),c=/^(?![A-Z]+$)(?![a-z]+$)(?!\d+$)(?![\W_]+$)\S+$/,l={props:["routerTitle","classifyName","t","phone","code"],data:function(){return{passwords:"",surePasswords:"",clickAble:!0}},created:function(){},methods:r()({},Object(i.b)(["setInterestFlag","setGiftFlag","setMembershipCardDialog"]),{sure:function(){var e=this;if(this.changeColor&&this.clickAble){this.clickAble=!1;var t=this.passwords;if(c.test(t)){if("register"==this.routerTitle)this.$http.post(this.$server.register,{cellphone:this.phone,password:this.$md5(this.passwords),againPassword:this.$md5(this.surePasswords),code:this.code,origin:1}).then(function(t){if(200==t.data.status){var s={accessToken:t.data.content.accessToken,nickname:t.data.content.nickname,avatar:t.data.content.avatar,userid:t.data.content.id,cellphone:t.data.content.cellphone},o=sessionStorage.getItem("rediectUrl");t.data.content.integralNum>0?(o&&(o.includes("assembleRecordId")||o.includes("receiveLearnCard"))?e.setInterestFlag(!1):e.setInterestFlag(!0),t.data.content.welcomeSpeech.length>0?(sessionStorage.setItem("welcomeSpeech",t.data.content.welcomeSpeech),t.data.content.welcomeSpeechForMemberMake&&t.data.content.welcomeSpeechForMemberMake.length>0&&sessionStorage.setItem("welcomeSpeechForMemberMake",t.data.content.welcomeSpeechForMemberMake)):t.data.content.welcomeSpeechForMemberMake&&t.data.content.welcomeSpeechForMemberMake.length>0&&sessionStorage.setItem("welcomeSpeechForMemberMake",t.data.content.welcomeSpeechForMemberMake)):t.data.content.welcomeSpeech.length>0?(e.setGiftFlag(t.data.content.welcomeSpeech),t.data.content.welcomeSpeechForMemberMake&&t.data.content.welcomeSpeechForMemberMake.length>0&&sessionStorage.setItem("welcomeSpeechForMemberMake",t.data.content.welcomeSpeechForMemberMake)):t.data.content.welcomeSpeechForMemberMake&&t.data.content.welcomeSpeechForMemberMake.length>0&&e.setMembershipCardDialog(t.data.content.welcomeSpeechForMemberMake),1==t.data.content.isVip&&(s.isVip=!0),e.$setCookie("uInfo",n()(s)),o?(sessionStorage.removeItem("rediectUrl"),e.$router.push(o)):e.$router.push("/")}else e.clickAble=!0});else if("forget"==this.routerTitle){var s={cellphone:this.phone,password:this.$md5(this.passwords),againPassword:this.$md5(this.surePasswords),code:this.code};this.$http.post(this.$server.modifyPassword,s).then(function(t){if(200!=t.data.status)e.clickAble=!0;else{e.$toast("密码修改成功");setTimeout(function(){e.$router.push("/login")},500)}})}else if("bound"==this.routerTitle){var o={cellphone:this.phone,password:this.$md5(this.passwords),againPassword:this.$md5(this.surePasswords)};this.$http.post(this.$server.bindCellphone,o).then(function(t){if(200==t.data.status){var s={accessToken:t.data.content.accessToken,nickname:t.data.content.nickname,avatar:t.data.content.avatar,userid:t.data.content.id};e.$setCookie("uInfo",n()(s)),e.$router.push("/")}})}}else this.$toast("密码格式错误"),this.clickAble=!0}}}),computed:{changeColor:function(){return this.passwords.length>=7&&this.passwords.length<=20&&this.surePasswords.length>=7&&this.surePasswords.length<=20&&this.surePasswords==this.passwords}}},d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"go-logn"},[s("div",{staticClass:"div1",on:{click:function(t){return e.$router.go(-1)}}},[s("van-icon",{staticClass:"return-left",attrs:{name:"arrow-left"}})],1),e._v(" "),s("div",{staticClass:"div2"},[e._v("\n\t\t\t"+e._s(e.classifyName)+"\n\t\t")])]),e._v(" "),s("div",{staticClass:"password-wrap"},[s("div",{staticClass:"input-wrap"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.passwords,expression:"passwords"}],attrs:{type:"password",maxlength:"20",placeholder:"输入密码"},domProps:{value:e.passwords},on:{input:function(t){t.target.composing||(e.passwords=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"input-wrap"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.surePasswords,expression:"surePasswords"}],attrs:{type:"password",maxlength:"20",placeholder:"确认密码"},domProps:{value:e.surePasswords},on:{input:function(t){t.target.composing||(e.surePasswords=t.target.value)}}})]),e._v(" "),s("p",{staticClass:"tips"},[e._v("\n\t\t\t密码长度7-20位，须包含数字、字母（大小写）至少2种或以上元素\n\t\t")]),e._v(" "),s("div",{staticClass:"login-button",class:e.changeColor?"red-login-button":"gray-login-button",on:{click:e.sure}},[e._v("\n            确认提交\n        ")])])])},staticRenderFns:[]};var u=s("VU/8")(l,d,!1,function(e){s("K3ex")},"data-v-317aa0f1",null);t.a=u.exports},E1IK:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("Bvx+"),n=s("nrIC"),a=s("Ds8B"),r={data:function(){return{t:1,routerTitle:"forget",phoneTitle:"找回密码",codeTitle:"请输入验证码",passwordTitle:"设置密码",phone:"",code:""}},methods:{},components:{commonPhone:o.a,commonCode:n.a,commonPassword:a.a}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[1==e.t?s("commonPhone",{attrs:{classifyName:e.phoneTitle,routerTitle:e.routerTitle,t:e.t,phone:e.phone},on:{"update:t":function(t){e.t=t},"update:phone":function(t){e.phone=t}}}):e._e(),e._v(" "),2==e.t?s("commonCode",{attrs:{classifyName:e.codeTitle,routerTitle:e.routerTitle,t:e.t,phone:e.phone,code:e.code},on:{"update:t":function(t){e.t=t},"update:phone":function(t){e.phone=t},"update:code":function(t){e.code=t}}}):e._e(),e._v(" "),3==e.t?s("commonPassword",{attrs:{classifyName:e.passwordTitle,routerTitle:e.routerTitle,t:e.t,phone:e.phone,code:e.code},on:{"update:t":function(t){e.t=t},"update:phone":function(t){e.phone=t},"update:code":function(t){e.code=t}}}):e._e()],1)},staticRenderFns:[]};var c=s("VU/8")(r,i,!1,function(e){s("1MJ7")},"data-v-6ccd94f4",null);t.default=c.exports},K3ex:function(e,t){},aj9N:function(e,t){},lcGt:function(e,t){},nrIC:function(e,t,s){"use strict";var o={props:["classifyName","routerTitle","t","phone","code"],data:function(){return{showKeyboard:!0,countTime:60,clickAble:!0,codeNum:""}},methods:{resend:function(){if(this.countTime)return!1;"register"==this.routerTitle||"bound"==this.routerTitle?this.sendSMS(1):"forget"==this.routerTitle&&this.sendSMS(2)},sendSMS:function(e){var t=this;this.$http.post("/common/sendSMS",{cellphone:this.phone,smsType:e}).then(function(e){200==e.status&&(t.countTime=60,t.timerInterval())})},onDelete:function(){this.codeNum=this.codeNum.substring(0,this.codeNum.length-1)},changeKeyboard:function(){this.showKeyboard=!0},onInput:function(e){if(!(this.codeNum.length<6))return!1;5==this.codeNum.length&&(this.showKeyboard=!1),this.codeNum+=e},sureCode:function(){var e=this;this.changeColor&&this.clickAble&&(this.clickAble=!1,this.$http.post(this.$server.checkVeriCode,{cellphone:this.phone,code:this.codeNum}).then(function(t){200==t.data.status?"bound"==e.routerTitle?e.$http.post(e.$server.getCellPhoneState,{cellphone:e.phone}).then(function(t){t.data.content.state?e.$router.push("/"):e.$emit("update:t",3)}):(e.$emit("update:code",e.codeNum),e.$emit("update:t",3)):(e.$toast(t.data.message),e.clickAble=!0)}))},timerInterval:function(){var e=this,t=void 0;t&&clearInterval(t),t=setInterval(function(){e.countTime<=0?clearInterval(t):e.countTime--},1e3)}},mounted:function(){this.timerInterval(),setTimeout(function(){document.body.scrollTop=0},1)},computed:{changeColor:function(){return 6===this.codeNum.length}}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"go-logn"},[s("div",{staticClass:"div1",on:{click:function(t){return e.$router.go(-1)}}},[s("van-icon",{staticClass:"return-left",attrs:{name:"arrow-left"}})],1),e._v(" "),s("div",{staticClass:"div2"},[e._v("\n\t\t\t\t"+e._s(e.classifyName)+"\n\t\t\t")])]),e._v(" "),s("p",{staticClass:"tips"},[e._v("验证短信已发送到"+e._s(e.phone)+" "),s("span",{staticClass:"resend",class:e.countTime?"can-resend":"",on:{click:e.resend}},[e._v("重新发送"),e.countTime?s("span",[e._v("("+e._s(e.countTime)+"s)")]):e._e()])]),e._v(" "),s("div",{staticClass:"code",on:{click:e.changeKeyboard}},[s("div",[e._v(e._s(e.codeNum[0]))]),e._v(" "),s("div",[e._v(e._s(e.codeNum[1]))]),e._v(" "),s("div",[e._v(e._s(e.codeNum[2]))]),e._v(" "),s("div",[e._v(e._s(e.codeNum[3]))]),e._v(" "),s("div",[e._v(e._s(e.codeNum[4]))]),e._v(" "),s("div",[e._v(e._s(e.codeNum[5]))])]),e._v(" "),s("div",{staticClass:"login-button",class:e.changeColor?"red-login-button":"gray-login-button",on:{click:e.sureCode}},[e._v("\n\t\t\t提交验证码\n\t\t")]),e._v(" "),s("van-number-keyboard",{attrs:{show:e.showKeyboard,"extra-key":""},on:{input:e.onInput,delete:e.onDelete}})],1)},staticRenderFns:[]};var a=s("VU/8")(o,n,!1,function(e){s("aj9N")},"data-v-2a7e1f18",null);t.a=a.exports}});