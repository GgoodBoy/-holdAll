webpackJsonp([12],{"D/e5":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("Dd8w"),i=n.n(a),o=n("woOf"),s=n.n(o),r=n("NYxO"),c=n("teIl"),A=n("pOVd"),l=n.n(A),d=n("KcFd"),u=n.n(d),h=n("EzYH"),p=n.n(h);var g={data:function(){return{supportAli:!0,img1:u.a,img2:p.a}},props:["coinId"],created:function(){"micromessenger"!=window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)&&"undefined"==typeof WeixinJSBridge||(this.supportAli=!1)},methods:{cancle:function(){this.$emit("update:showPayWay",!1)},alipay:function(){var t={coinsId:this.coinId,paymentType:3,returnUrl:window.location.origin+"?type=1"};this.$http.post(this.$server.buyCoins,t).then(function(t){if(200==t.data.status){var e="https://openapi.alipay.com/gateway.do?"+t.data.content.alipayInfo;window.location.href=e}})},wxpay:function(){var t=this,e={coinsId:this.coinId,paymentType:2,returnUrl:encodeURIComponent(window.location.href),orderIp:l.a.cip};if(this.$toast.loading({mask:!1,loadingType:"spinner"}),"undefined"==typeof WeixinJSBridge)this.$http.post(this.$server.buyCoins,e).then(function(e){200==e.data.status&&(localStorage.setItem("wechatType","true"),localStorage.setItem("orderId",e.data.content.wechatInfo.outTradeNo),t.$emit("openDialog","true"),window.location.href=e.data.content.wechatInfo.mweb_url)});else{var n=null;n=setInterval(function(){var a=localStorage.getItem("openId");a&&""!=a?(e.openId=a,e.paymentType=5,t.$http.post(t.$server.buyCoins,e).then(function(e){200==e.data.status&&t.onBridgeReady(e.data.content.wechatInfo)}),clearInterval(n)):(t.$toast("当前环境不支持公众号支付，请检查微信配置"),clearInterval(n))},1e3)}},onBridgeReady:function(t){var e=this;t.appid,t.timestamp,t.nonce_str,t.prepay_id,t.sign_type,t.sign;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appid,timeStamp:t.timestamp,nonceStr:t.nonce_str,package:"prepay_id="+t.prepay_id,signType:t.sign_type,paySign:t.sign},function(t){"get_brand_wcpay_request:ok"==t.err_msg&&e.$dialog.alert({message:"微信支付成功"}).then(function(){window.location.reload()})})}}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pay-way-wrap"},[n("div",{staticClass:"pay-way"},[n("div",{on:{click:t.wxpay}},[n("img",{attrs:{src:t.img1,alt:""}}),t._v(" "),n("span",{staticClass:"c9a"},[t._v("微信支付")])]),t._v(" "),t.supportAli?n("div",{on:{click:t.alipay}},[n("img",{attrs:{src:t.img2,alt:""}}),t._v(" "),n("span",{staticClass:"c9a"},[t._v("支付宝支付")])]):t._e(),t._v(" "),n("div",{staticClass:"cancle",on:{click:t.cancle}},[n("span",[t._v("取消")])])])])},staticRenderFns:[]};var m=n("VU/8")(g,f,!1,function(t){n("jazE")},"data-v-62547697",null).exports;var y={data:function(){return{coinDefault:[],defaultIndex:"",showPayWay:!1,coinId:"",coinBalance:""}},watch:{showPayWay:function(t,e){if(t){var n=s()({},this.audioData,{bottom:"3.2rem"});this.setAudioData(n)}else{var a=s()({},this.audioData,{bottom:"8px"});this.setAudioData(a)}}},computed:i()({},Object(r.c)(["hasOpenApp","audioData"])),created:function(){this.init(),this.getUserInfo(),this.getCoinsList()},methods:i()({},Object(r.b)(["setAudioData"]),{getUserInfo:function(){var t=this;this.$http.post(this.$server.getUserInfoById,{}).then(function(e){200==e.data.status&&(t.coinBalance=e.data.content.coinBalance.toFixed(2))})},getCoinsList:function(){var t=this;this.$http.post(this.$server.getCoinsList,{}).then(function(e){200==e.data.status&&(t.coinDefault=e.data.content)})},onClickLeft:function(){sessionStorage.getItem("buyToAccount")?(sessionStorage.removeItem("buyToAccount"),this.$router.go(-1)):this.$router.replace("/user")},checkDefault:function(t,e){this.coinId=t.id,this.diyNum="",this.defaultIndex===e?(this.defaultIndex="",this.coinId=""):this.defaultIndex=e},surePay:function(){""!=this.coinId?this.showPayWay=!0:this.$toast("请选择充值金额")},init:function(){var t=this;"micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)||"undefined"!=typeof WeixinJSBridge?this.supportAli=!1:localStorage.getItem("wechatType")&&this.$dialog.confirm({title:"提示",message:"请确认微信支付是否已完成",confirmButtonColor:"#D40015",confirmButtonText:"支付成功",cancelButtonText:"关闭"}).then(function(){t.checkOrder()}).catch(function(){localStorage.removeItem("wechatType"),localStorage.removeItem("orderId")})},openDialog:function(){var t=this;this.$dialog.confirm({title:"提示",message:"请确认微信支付是否已完成",confirmButtonColor:"#D40015",confirmButtonText:"支付成功",cancelButtonText:"关闭"}).then(function(){t.checkOrder()}).catch(function(){localStorage.removeItem("wechatType"),localStorage.removeItem("orderId")})},checkOrder:function(){var t=this,e=localStorage.getItem("orderId");if(e){var n={outTradeNo:e,paymentType:2};this.$http.post(this.$server.checkOrder,n).then(function(e){localStorage.removeItem("wechatType"),localStorage.removeItem("orderId"),200==e.data.status&&(t.getUserInfo(),t.getCoinsList())})}}}),components:{ChoicePayWay:m,Header:c.a}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header-nav"},[n("Header",{attrs:{name:"我的账户"}}),t._v(" "),n("router-link",{staticClass:"detail",attrs:{to:"/user/detail"}},[t._v("明细")]),t._v(" "),n("div",{staticClass:"remaining"},[n("div",{staticClass:"remaining-num"},[t._v("\n\t\t\t\t"+t._s(t.coinBalance)+"\n\t\t\t")]),t._v(" "),n("div",{staticClass:"remaining-word c9a"},[t._v("\n\t\t\t\t可用余额（夫子币）\n\t\t\t")])]),t._v(" "),0==t.coinDefault.length?n("div",{staticStyle:{"text-align":"center"}},[n("van-loading",{staticStyle:{display:"inline-block"},attrs:{type:"spinner"}})],1):t._e(),t._v(" "),n("ul",{staticClass:"clearfix"},t._l(t.coinDefault,function(e,a){return n("li",{key:a,staticClass:"item fl",class:{active:a===t.defaultIndex},on:{click:function(n){return t.checkDefault(e,a)}}},[n("h3",{staticClass:"tc recharge-num"},[t._v(t._s(e.coinsName))]),t._v(" "),n("p",{staticClass:"tc actual-num"},[t._v("（¥"+t._s(e.priceAndroid.toFixed(2))+"）")])])}),0),t._v(" "),n("div",{staticClass:"sure-button",on:{click:t.surePay}},[t._v("\n\t\t\t立即充值\n\t\t")]),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.showPayWay?n("ChoicePayWay",{attrs:{showPayWay:t.showPayWay,coinId:t.coinId},on:{"update:showPayWay":function(e){t.showPayWay=e},"update:show-pay-way":function(e){t.showPayWay=e},openDialog:t.openDialog}}):t._e()],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"explain-title"},[e("p",{staticClass:"c3a"},[this._v("充值说明")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"explain-con c9a"},[e("p",[this._v("1.充值金额无使用期限，充值成功后无法退换，不可提现；")]),this._v(" "),e("p",[this._v("2.如果遇到无法充值、充值失败等问题，可关注学国学网微信公众号，解决你的问题。")])])}]};var I=n("VU/8")(y,v,!1,function(t){n("sQv2"),n("OYsL")},"data-v-030a2e38",null);e.default=I.exports},EzYH:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAMAAAANIilAAAAAhFBMVEUAAAAAn+gAn+cAn+kAn+gAn+kAn+gAn+gAnugAn+gAn+kAoewAn+gAn+gAnucAn+gAn+gAn+gAn+kAoOkAn+gAnugAoeYAoPAAn+kAn+gAn+kAn+gAn+kAnuoAnewAn+gAn+kAn+kAn+gAn+gAn+gAn+gAn+kAn+gAn+8Ame4AoekAn+guf6zSAAAAK3RSTlMA4IDwkFL86sawSBvlvx/31amac3AsCQXQuaJqRBcNyMOIhWE92lo4EA9RZ7PYzQAAAXVJREFUSMftltlygyAUhk9EUXHXaowas2/l/d+vMFWJVSJTp8uF3+UP3yhH5AALCz+PYZtUimkbIMex6ASWI3VdOokrsy2qgCVZL1VifN02/QJeMQayPSoP6qzxdFjzgTg67W00pf9UPmgNN55qHUryHcZRklctJ56uOn6hYBh9UvIUNajKHgy5Y0XZ1fs4YuPLZQnumg0W35R1NpYFinJeHLVD7HWfJmVjJ6VqY92HhppoOUs2wAhVZHTuZ36y4wmhKnIFdeJdQss+GFsQ5CpyBKk4OnZJ69dariCTjLkCXKTi/fcTMs6utE8EAqfc4Bcygre+62X8odDxuEZIJgfrc8/dP1j8ji0DBOtKtuYb7J/cmO/LKuC/eJmBQFrt7a5VQ8JDwlyOedxOybwdGEVommFMgJNg2hLE6YSMT89J6tEeGyKVmwlVWxkS0QGXsoaX7QbZunaMPURHQZqk0Slhz2qxc5r7nGuFP+NC48+5Si0s/AkfBa29WXbjCSkAAAAASUVORK5CYII="},KcFd:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAMAAAANIilAAAAAmVBMVEUAAAABrDEBrDEBrDEArTABrDEBrDEBrDEBrDEArDAAqzEArTEBrTEBrDECrDECrTEArDEArDEArDEArDEArC8ArzQAtEsBrDEBrDEBrDEBrDECrDECrDECrTEArTEArDAAqzAArDEArTEAnTECrDEBrDEArDQAqjMBrDEBrTECrTECrTAArDEArTABrDIArDEArTIAoi4BrDFmWmlhAAAAMnRSTlMA+en3erX08NFQLhjIrqaGd1c8NCYJA+Hb1rmblIlxYz8pHwWOfyIS3MCfg2lKzl1HC3wsNKsAAAG3SURBVEjH7ZTHkoJAEECHJJIlraKYBcyh///jFotBWCY47sET79QFvJqmw6Cenm/xE2TaRAGQJtpp9fORankytJB3G2E1nivQQUoLMTecAAX5IuIaCtBRBVxgcnrnmgqwWfLd7RAXyFWnr2LNVBtHa668wIJfxrUdlF1PqvDAPVjGR6CSrIrHz3gGFStutVofOa1cbahwOfKslgeen746rPru6zlnUofAZOAs7mYUxmx5wFKT5SPMtL0O+l5TTbrMUJVFfE6gYXijZS9R3fF61R33YUjKMs3dWyoQSGdCnlJcPffE9mQEJP5ZcNI3QDCNFFYZo47tQpcAD9o1Wlc/JRkWTlDryHn3mCTHwaXOy22m1WSsVY03aurjV13aokLGL1njjTG0OnIcCff4iF2wia38+9vrCbDRyet+By0sGThghdXtzZjjDihyCg3hgSNfKfLzMD3BYzTnyDvSDct85gV6BEsvTY2AI5ukPFd2ltDt4iCSBVYxF2a5cvSeI0P2kQCxTXVHSIjiwHf5bMl+3ZA4ptaRDfQJUWZL1TZopzHAEX1IHK3uweYZqLqM/o81M1FPz1f5Ban524O8JciVAAAAAElFTkSuQmCC"},OYsL:function(t,e){},jazE:function(t,e){},sQv2:function(t,e){}});