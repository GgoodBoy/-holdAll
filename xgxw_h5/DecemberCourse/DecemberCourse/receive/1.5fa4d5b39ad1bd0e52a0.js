webpackJsonp([1],{"5Kq2":function(e,t,n){e.exports=n.p+"image/receive_bgd.e9f5d2d.png"},"5uBo":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("3cXf"),a=n.n(i),r=n("lC5x"),s=n.n(r),o=n("J0Oq"),c=n.n(o),d=n("5Kq2"),l=n.n(d),p=n("rBKV"),u=n.n(p),v=n("GKmE"),m=n("olkN"),h={data:function(){return{init:!1,courseId:878,channelId:"",activityName:"cgt",bgd:l.a,buyCourse:-1,signUp:-1,receiveBookFlag:!1,userInfo:{},receptAddress:"",receptName:"",receptCellphone:"",httpFlag:!1}},computed:{disabled:function(){return""==this.receptAddress||""==this.receptName||""==this.receptCellphone},inApp:function(){return m.b.inApp}},created:function(){var e=this;if(sessionStorage.getItem("index")){if(this.init=!0,this.inApp){var t=window.sessionStorage.getItem("userId"),n=window.sessionStorage.getItem("token");this.userInfo={userId:t,token:n}}else{var i=this.$getCookie("uInfo");this.userInfo={userId:JSON.parse(i).userid,token:JSON.parse(i).accessToken}}this.$nextTick(function(){e.verifyIsComplete(),e.receiveInfo()}),this.channelId=u.a.page.find(function(e){return window.location.href.includes(e.name)}).channelId}else this.$router.replace("/")},methods:{setPosterShow:m.a.setPosterShow,receiveInfo:function(){var e=this;return c()(s.a.mark(function t(){var n,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.$toast.loading({duration:0,forbidClick:!0}),n={userId:e.userInfo.userId},t.next=4,e.$http.post(e.$server.receiveInfo,n,{userId:e.userInfo.userId,token:e.userInfo.token});case 4:i=t.sent,e.$toast.clear(),e.httpFlag=!0,200==i.data.status&&i.data.content&&(e.receptAddress=i.data.content.receptAddress,e.receiveBookFlag=!0);case 8:case"end":return t.stop()}},t,e)}))()},verifyIsComplete:function(){var e=this;return c()(s.a.mark(function t(){var n,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.$toast.loading({duration:0,forbidClick:!0}),n={userId:e.userInfo.userId},t.next=4,e.$http.post(e.$server.verifyIsComplete,n,{userId:e.userInfo.userId,token:e.userInfo.token});case 4:i=t.sent,e.$toast.clear(),200==i.data.status&&(e.buyCourse=i.data.content.buyCourse,e.signUp=i.data.content.signUp);case 7:case"end":return t.stop()}},t,e)}))()},receiveBook:function(){var e=this;return c()(s.a.mark(function t(){var n,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.disabled){t.next=2;break}return t.abrupt("return");case 2:if(11==e.receptCellphone.length){t.next=5;break}return e.$toast("请输入正确的手机号"),t.abrupt("return");case 5:return e.pointButton(11),e.$toast.loading({duration:0,forbidClick:!0}),n={userId:e.userInfo.userId,receptCellphone:e.receptCellphone,receptName:e.receptName,receptAddress:e.receptAddress},t.next=10,e.$http.post(e.$server.receiveBook,n,{userId:e.userInfo.userId,token:e.userInfo.token});case 10:i=t.sent,e.$toast.clear(),200==i.data.status?(e.receiveBookFlag=!0,e.$toast("领取成功，所获礼品将在活动结束后统一邮寄")):e.$toast(i.data.message);case 13:case"end":return t.stop()}},t,e)}))()},btn1Event:function(){0===this.buyCourse&&this.pointButton(9,this.goCourse)},goCourse:function(){if(!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/))try{window.webkit.messageHandlers.iOSAppMethodName.postMessage({describe:"去课程详情页",method:"goCourseDetail",params:{courseId:this.courseId,isCloseWebView:!1,channelId:this.channelId,activityName:this.activityName}})}catch(n){var e="prod"==this.$server.env?"https://xgxm.xueguoxue.com":"https://scm.youfushuyuan.com",t=v.a.getQueryString("activityShareUserId");window.location.href=t?e+"/?channelId="+this.channelId+"&activityName="+this.activityName+"&activityShareUserId="+t+"#/course/"+this.courseId:e+"/?channelId="+this.channelId+"&activityName="+this.activityName+"#/course/"+this.courseId}else if(window.android){if(window.android.notify){var n=a()({describe:"去课程详情页",method:"openLesson",params:{courseId:this.courseId,isCloseWebView:!1,channelId:this.channelId,activityName:this.activityName}});window.android.notify(n)}}else{var i="prod"==this.$server.env?"https://xgxm.xueguoxue.com":"https://scm.youfushuyuan.com",r=v.a.getQueryString("activityShareUserId");window.location.href=r?i+"/?channelId="+this.channelId+"&activityName="+this.activityName+"&activityShareUserId="+r+"#/course/"+this.courseId:i+"/?channelId="+this.channelId+"&activityName="+this.activityName+"#/course/"+this.courseId}},btn2Event:function(){0===this.signUp&&(this.pointButton(10),this.setPosterShow(!0))},pointButton:function(e,t){var n=this;return c()(s.a.mark(function i(){var a;return s.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return a={type:e},i.next=3,n.$http.post(n.$server.pointButton,a);case 3:200==i.sent.data.status&&t&&t();case 5:case"end":return i.stop()}},i,n)}))()}}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.init,expression:"init"}],staticClass:"receive-page"},[n("img",{staticClass:"bgd",attrs:{src:e.bgd}}),e._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"section1"},[n("p",{staticClass:"title"},[e._v("领取条件:")]),e._v(" "),n("div",{staticClass:"item"},[n("p",{staticClass:"text"},[e._v("成功购买《菜根谭》课程")]),e._v(" "),n("p",{staticClass:"btn",class:{disabled:0!=e.buyCourse},on:{click:e.btn1Event}},[e._v(e._s(e.buyCourse>=0?1==e.buyCourse?"已完成":"未完成/去购课":""))])]),e._v(" "),n("div",{staticClass:"item"},[n("p",{staticClass:"text"},[e._v("成功邀请一名好友注册")]),e._v(" "),n("p",{staticClass:"btn",class:{disabled:0!=e.signUp},on:{click:e.btn2Event}},[e._v(e._s(e.signUp>=0?1==e.signUp?"已完成":"未完成/去邀约":""))])])]),e._v(" "),n("div",{staticClass:"section2",class:{normal:1===e.buyCourse&&1===e.signUp}},[0===e.buyCourse||0===e.signUp?n("div",{staticClass:"shade"}):e._e(),e._v(" "),n("p",{staticClass:"title"},[e._v("收货地址:")]),e._v(" "),n("div",{staticClass:"item"},[e._m(0),e._v(" "),n("span",[e._v(":")]),e._v(" "),e.receiveBookFlag?n("p",{staticClass:"text"},[e._v(e._s(e.receptAddress))]):n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.receptAddress,expression:"receptAddress"}],domProps:{value:e.receptAddress},on:{input:function(t){t.target.composing||(e.receptAddress=t.target.value)}}})]),e._v(" "),e.httpFlag?[e.receiveBookFlag?e._e():[n("div",{staticClass:"item"},[e._m(1),e._v(" "),n("span",[e._v(":")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.receptName,expression:"receptName"}],attrs:{type:"text"},domProps:{value:e.receptName},on:{input:function(t){t.target.composing||(e.receptName=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"item"},[e._m(2),e._v(" "),n("span",[e._v(":")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.receptCellphone,expression:"receptCellphone"}],attrs:{type:"tel",maxlength:"11"},domProps:{value:e.receptCellphone},on:{input:function(t){t.target.composing||(e.receptCellphone=t.target.value)}}})]),e._v(" "),n("p",{staticClass:"tips"},[e._v("\n                        注意：请添加真实的收货信息，如因地址不详或收件人信息不准确，造成的投递失败，将视为自动放弃。信息提交后不能修改，请核对个人信息。\n                    ")])]]:e._e()],2),e._v(" "),n("div",{staticClass:"receive-btn",class:{disabled:e.disabled,received:e.receiveBookFlag},attrs:{role:"button"},on:{click:e.receiveBook}},[e._v(e._s(e.receiveBookFlag?"已领取":"领取"))])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"des"},[this._v("地址"),t("i")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"des"},[this._v("收件人"),t("i")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"des"},[this._v("电话"),t("i")])}]};var f=n("C7Lr")(h,g,!1,function(e){n("Lbq6")},"data-v-421f2688",null);t.default=f.exports},Lbq6:function(e,t,n){var i=n("g6p9");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n("FIqI")("a2130704",i,!0,{})},g6p9:function(e,t,n){(e.exports=n("UTlt")(!1)).push([e.i,"\n.receive-page[data-v-421f2688]{position:relative;min-height:100%;background:#f9f9f9\n}\n.receive-page .bgd[data-v-421f2688]{position:relative;z-index:1\n}\n.receive-page .content[data-v-421f2688]{position:absolute;z-index:2;top:0;left:0;width:100%;height:100%;padding-top:2.83rem\n}\n.receive-page .content .section1[data-v-421f2688]{width:6.5rem;height:2.8rem;margin:0 auto;border-radius:0.34rem;background:rgba(234,241,247,0.8);padding:0.36rem 0.3rem\n}\n.receive-page .content .section1 .title[data-v-421f2688]{font-family:'my-font';font-size:0.4rem;color:#003871\n}\n.receive-page .content .section1 .item[data-v-421f2688]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin:0.3rem 0\n}\n.receive-page .content .section1 .item .text[data-v-421f2688]{font-size:0.3rem;color:#333\n}\n.receive-page .content .section1 .item .btn[data-v-421f2688]{width:1.96rem;height:.54rem;text-align:center;line-height:0.54rem;color:#fff;font-size:0.24rem;border-radius:0.5rem;background:-webkit-gradient(linear, right top, left top, from(#C30D23), to(#F74C60));background:linear-gradient(-90deg, #C30D23 0%, #F74C60 100%)\n}\n.receive-page .content .section1 .item .btn.disabled[data-v-421f2688]{background:#ccc\n}\n.receive-page .content .section2[data-v-421f2688]{width:6.5rem;margin:0.4rem auto;border-radius:0.34rem;background:rgba(234,241,247,0.8);padding:0.46rem 0.3rem;position:relative\n}\n.receive-page .content .section2.normal input[data-v-421f2688],.receive-page .content .section2.normal textarea[data-v-421f2688]{background:#fff !important\n}\n.receive-page .content .section2 .shade[data-v-421f2688]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:2\n}\n.receive-page .content .section2 .title[data-v-421f2688]{font-family:'my-font';font-size:0.4rem;color:#003871;margin-bottom:0.1rem\n}\n.receive-page .content .section2 .item[data-v-421f2688]{font-size:0;color:#333;margin:0.25rem 0\n}\n.receive-page .content .section2 .item .des[data-v-421f2688]{font-size:0.3rem;width:0.94rem;text-align:justify;line-height:0.52rem;display:inline-block;vertical-align:top;overflow:hidden;height:.52rem\n}\n.receive-page .content .section2 .item .des i[data-v-421f2688]{display:inline-block;width:100%;height:0\n}\n.receive-page .content .section2 .item span[data-v-421f2688]{width:0.1rem;display:inline-block;vertical-align:middle;line-height:0.52rem;font-size:0.3rem;margin:0 0.1rem\n}\n.receive-page .content .section2 .item input[data-v-421f2688],.receive-page .content .section2 .item textarea[data-v-421f2688]{display:inline-block;vertical-align:top;border:none;outline:none;resize:none;width:4.5rem;background:#e2e2e2;font-size:0.3rem;line-height:0.42rem;padding:0.05rem 0.2rem;border-radius:0.06rem\n}\n.receive-page .content .section2 .item .text[data-v-421f2688]{display:inline-block;vertical-align:top;font-size:0.3rem;line-height:0.48rem;padding:0.04rem 0;width:calc(100% - 1.3rem)\n}\n.receive-page .content .section2 .item textarea[data-v-421f2688]{height:1.2rem;line-height:0.48rem\n}\n.receive-page .content .section2 .tips[data-v-421f2688]{margin-top:0.12rem;font-size:0.24rem;color:#666;line-height:0.32rem\n}\n.receive-page .content .receive-btn[data-v-421f2688]{width:5.1rem;height:0.8rem;border-radius:0.5rem;line-height:0.8rem;text-align:center;cursor:pointer;margin:0 auto;font-size:0.3rem;color:#fff;background:-webkit-gradient(linear, right top, left top, from(#C30D23), to(#F74C60));background:linear-gradient(-90deg, #C30D23 0%, #F74C60 100%)\n}\n.receive-page .content .receive-btn.disabled[data-v-421f2688]{background:#ccc;cursor:not-allowed\n}\n.receive-page .content .receive-btn.received[data-v-421f2688]{margin-top:3rem\n}\n",""])}});